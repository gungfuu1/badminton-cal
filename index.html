<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏ö‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏±‡∏ô</title>
<style>
  * {
    box-sizing: border-box;
  }

  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    padding: 16px;
    max-width: 900px;
    margin: auto;
    background: #fafafa;
  }

  h1 {
    font-size: 1.6rem;
  }

  h2 {
    margin-top: 24px;
    font-size: 1.2rem;
  }

  input {
    padding: 8px;
    margin: 4px 0;
    width: 160px;
    font-size: 1rem;
  }

  button {
    padding: 8px 12px;
    font-size: 1rem;
    cursor: pointer;
  }

  .group {
    border: 1px solid #ddd;
    padding: 12px;
    margin-bottom: 12px;
    background: #fff;
    border-radius: 6px;
  }

  .group b {
    display: inline-block;
    margin-bottom: 6px;
  }

  .group button {
    margin-left: 8px;
    font-size: 0.9rem;
  }

  .result {
    background: #f1f1f1;
    padding: 12px;
    margin-top: 16px;
    border-radius: 6px;
    font-size: 0.95rem;
  }

  hr {
    border: none;
    border-top: 1px solid #ddd;
    margin: 12px 0;
  }

  /* üì± Mobile */
  @media (max-width: 600px) {
    body {
      padding: 12px;
    }

    h1 {
      font-size: 1.4rem;
    }

    input {
      width: 100%;
      margin-bottom: 8px;
    }

    button {
      width: 100%;
      margin-top: 6px;
    }

    .group button {
      width: auto;
      margin-top: 6px;
    }
  }
</style>

</head>
<body>

<h1>üè∏ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡πÅ‡∏ö‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏±‡∏ô‡∏ï‡πà‡∏≠‡∏Ñ‡∏ô</h1>

<h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ô‡∏≤‡∏°</h2>
‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏ô‡∏≤‡∏° (‡∏ö‡∏≤‡∏ó/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á):
<input type="number" id="courtPrice" value="230"><br>
‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏£‡∏ß‡∏°:
<input type="number" id="courtHours" value="2">

<h2>‡∏•‡∏π‡∏Å‡πÅ‡∏ö‡∏î</h2>
‡∏£‡∏≤‡∏Ñ‡∏≤‡∏•‡∏π‡∏Å (‡∏ö‡∏≤‡∏ó/‡∏•‡∏π‡∏Å):
<input type="number" id="shuttlePrice" value="50">
‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏π‡∏Å:
<input type="number" id="shuttleQty" value="5">

<h2>‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</h2>
<div id="groups"></div>
<button onclick="addGroup()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡∏∏‡πà‡∏°</button>

<br><br>
<button onclick="calculate()">üßÆ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</button>

<div id="output" class="result"></div>

<script>
let groupCount = 0;

function addGroup() {
  groupCount++;
  const div = document.createElement("div");
  div.className = "group";
  div.dataset.id = groupCount;

  div.innerHTML = `
    <b>‡∏Å‡∏•‡∏∏‡πà‡∏° ${groupCount}</b>
    <button type="button" onclick="removeGroup(this)">‚ùå ‡∏•‡∏ö</button><br>
    ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô:
    <input type="number" class="people" value="4" min="1">
    ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô (‡∏ô‡∏≤‡∏ó‡∏µ):
    <input type="number" class="minutes" value="60" min="1">
  `;

  document.getElementById("groups").appendChild(div);
}

function removeGroup(btn) {
  btn.parentElement.remove();
}

function calculate() {
  const courtPrice = +document.getElementById("courtPrice").value;
  const shuttlePrice = +document.getElementById("shuttlePrice").value;
  const shuttleQty = +document.getElementById("shuttleQty").value;

  const peopleEls = document.querySelectorAll(".people");
  const minuteEls = document.querySelectorAll(".minutes");

  if (peopleEls.length === 0) {
    alert("‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏Å‡∏•‡∏∏‡πà‡∏°");
    return;
  }

  let groups = [];
  let totalPeople = 0;

  for (let i = 0; i < peopleEls.length; i++) {
    const people = +peopleEls[i].value;
    const minutes = +minuteEls[i].value;

    groups.push({
      people,
      minutes,
      courtCost: 0
    });

    totalPeople += people;
  }

  const maxMinutes = Math.max(...groups.map(g => g.minutes));

  // ‡∏Ñ‡∏¥‡∏î‡∏Ñ‡πà‡∏≤‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏ö‡∏ö timeline (‡∏ó‡∏µ‡∏•‡∏∞ 60 ‡∏ô‡∏≤‡∏ó‡∏µ)
  for (let t = 0; t < maxMinutes; t += 60) {
    const activeGroups = groups.filter(g => g.minutes > t);
    const activePeople = activeGroups.reduce((s, g) => s + g.people, 0);

    activeGroups.forEach(g => {
      g.courtCost += (courtPrice / activePeople) * g.people;
    });
  }

  const shuttleTotal = shuttlePrice * shuttleQty;
  const shuttlePerPerson = shuttleTotal / totalPeople;

  let html = `
    <h2>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</h2>
    ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏ô‡∏≤‡∏°: ${courtPrice} ‡∏ö‡∏≤‡∏ó/‡∏ä‡∏°.<br>
    ‡∏•‡∏π‡∏Å‡πÅ‡∏ö‡∏î: ${shuttleTotal} ‡∏ö‡∏≤‡∏ó<br>
    ‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${(courtPrice * (maxMinutes / 60) + shuttleTotal).toFixed(2)} ‡∏ö‡∏≤‡∏ó
    <hr>
  `;

  groups.forEach((g, i) => {
    const courtPerPerson = g.courtCost / g.people;
    const totalPerPerson = courtPerPerson + shuttlePerPerson;

    html += `
      <b>‡∏Å‡∏•‡∏∏‡πà‡∏° ${i + 1}</b><br>
      ‡∏Ñ‡πà‡∏≤‡∏™‡∏ô‡∏≤‡∏°‡∏Ñ‡∏ô‡∏•‡∏∞: ${courtPerPerson.toFixed(2)} ‡∏ö‡∏≤‡∏ó<br>
      ‡∏•‡∏π‡∏Å‡πÅ‡∏ö‡∏î‡∏Ñ‡∏ô‡∏•‡∏∞: ${shuttlePerPerson.toFixed(2)} ‡∏ö‡∏≤‡∏ó<br>
      <b>‡∏£‡∏ß‡∏°‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡∏ô‡∏•‡∏∞: ${totalPerPerson.toFixed(2)} ‡∏ö‡∏≤‡∏ó</b>
      <hr>
    `;
  });

  document.getElementById("output").innerHTML = html;
}

// ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: 1 ‡∏Å‡∏•‡∏∏‡πà‡∏°
addGroup();
</script>




</body>
</html>
